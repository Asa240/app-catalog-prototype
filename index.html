<!DOCTYPE html>



<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ZAF App Catalog</title>
<!-- You'll need to include Tailwind CSS -->

<style>
    .app-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 24px;
    }
    
    @media (max-width: 1024px) {
      .app-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    @media (max-width: 640px) {
      .app-grid {
        grid-template-columns: 1fr;
      }
    }

    /* Custom styles for iframe containers */
    .preview-container {
      height: 200px;
    }

    .full-preview {
      height: 500px;
    }
  </style>


<div class="container mx-auto px-4 py-6">
<h1 class="text-2xl font-bold mb-1">ZAF App Catalog</h1>
<p class="text-gray-600 mb-6">Upload and preview Zendesk App Framework applications</p>
<!-- Main content area -->
<div id="main-content">
<div class="mb-6 flex flex-wrap gap-4">
<div class="relative flex-grow">
<input class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" id="search-input" placeholder="Search apps..." type="text"/>
<div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            üîç
          </div>
</div>
<div>
<input accept=".zip" class="hidden" id="file-input" type="file"/>
<button class="flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none" id="upload-btn">
            Upload App
          </button>
</div>
</div>
<!-- Tag filtering section -->
<div class="mb-4">
<div class="font-medium text-gray-700 mb-2">Filter by Tags:</div>
<div class="flex flex-wrap gap-2" id="tag-categories">
<!-- Tag categories will be populated here -->
</div>
<div class="mt-2 hidden" id="active-tags">
<div class="text-sm text-gray-700 mb-1">Active filters:</div>
<div class="flex flex-wrap gap-1" id="active-tags-container">
<!-- Active tags will be displayed here -->
</div>
</div>
</div>
<!-- App grid -->
<div class="app-grid" id="app-grid">
<!-- App cards will be populated here -->
</div>
<!-- Empty state -->
<div class="text-center py-12 bg-gray-50 rounded-lg hidden" id="empty-state">
<p class="text-gray-500">No apps found matching your criteria.</p>
<button class="mt-2 text-blue-500 text-sm hover:underline" id="reset-filters">
          Reset filters
        </button>
</div>
</div>
<!-- App preview area -->
<div class="hidden" id="app-preview">
<!-- App preview content will be populated here -->
</div>
</div>



        `
      },
      {
        id: 'ticket-tagger',
        name: 'Ticket Tagger',
        description: 'Helps agents tag tickets with a simple UI',
        author: 'Support Team',
        tags: ['Productivity', 'Ticket Management', 'Agent Tools'],
        html: `
          <!DOCTYPE html>



<meta charset="utf-8"/>
<title>Ticket Tagger</title>
<style>
              body { 
                font-family: Arial, sans-serif; 
                padding: 10px; 
                color: #333;
              }
              h1 { 
                color: #03363D; 
                font-size: 18px; 
              }
              .tag {
                display: inline-block;
                background: #E9EBED;
                border-radius: 4px;
                padding: 5px 10px;
                margin: 5px;
                cursor: pointer;
                transition: all 0.2s;
              }
              .tag:hover {
                background: #D8DCDE;
              }
              .tag.selected {
                background: #078CDF;
                color: white;
              }
              .tag-section {
                margin-bottom: 15px;
              }
              .tag-section h2 {
                font-size: 14px;
                margin-bottom: 5px;
                color: #49545C;
              }
              .actions {
                margin-top: 15px;
                display: flex;
                justify-content: flex-end;
              }
              button {
                background-color: #078CDF;
                color: white;
                border: none;
                padding: 8px 12px;
                border-radius: 4px;
                cursor: pointer;
              }
              button:hover {
                background-color: #0665a2;
              }
            </style>


<h1>Ticket Tagger</h1>
<p>Select tags to apply to this ticket:</p>
<div class="tag-section">
<h2>Issue Type</h2>
<div class="tag" onclick="toggleTag(this)">bug</div>
<div class="tag" onclick="toggleTag(this)">question</div>
<div class="tag" onclick="toggleTag(this)">feature_request</div>
<div class="tag" onclick="toggleTag(this)">billing</div>
</div>
<div class="tag-section">
<h2>Priority</h2>
<div class="tag" onclick="toggleTag(this)">urgent</div>
<div class="tag" onclick="toggleTag(this)">high</div>
<div class="tag" onclick="toggleTag(this)">medium</div>
<div class="tag" onclick="toggleTag(this)">low</div>
</div>
<div class="tag-section">
<h2>Product Area</h2>
<div class="tag" onclick="toggleTag(this)">mobile</div>
<div class="tag" onclick="toggleTag(this)">web</div>
<div class="tag" onclick="toggleTag(this)">api</div>
<div class="tag" onclick="toggleTag(this)">admin</div>
</div>
<div class="actions">
<button onclick="applyTags()">Apply Tags</button>
</div>



        `
      },
      {
        id: 'order-lookup',
        name: 'Order Lookup',
        description: 'Quickly look up customer orders directly from the ticket sidebar',
        author: 'E-commerce Team',
        tags: ['OMS', 'Order Management', 'E-commerce', 'Retail'],
        html: `
          <!DOCTYPE html>



<meta charset="utf-8"/>
<title>Order Lookup</title>
<style>
              body { 
                font-family: Arial, sans-serif; 
                padding: 10px; 
                color: #333;
              }
              h1 { 
                color: #03363D; 
                font-size: 18px; 
                margin-bottom: 15px;
              }
              .search-container {
                display: flex;
                margin-bottom: 15px;
              }
              input {
                flex-grow: 1;
                padding: 8px;
                border: 1px solid #ddd;
                border-radius: 4px;
                margin-right: 8px;
                font-size: 14px;
              }
              button {
                background-color: #078CDF;
                color: white;
                border: none;
                padding: 8px 12px;
                border-radius: 4px;
                cursor: pointer;
                font-size: 14px;
              }
              button:hover {
                background-color: #0665a2;
              }
              .order {
                border: 1px solid #e0e0e0;
                border-radius: 4px;
                margin-bottom: 10px;
                overflow: hidden;
              }
              .order-header {
                background-color: #f5f5f5;
                padding: 10px;
                font-weight: bold;
                border-bottom: 1px solid #e0e0e0;
                display: flex;
                justify-content: space-between;
              }
              .order-status {
                font-size: 12px;
                padding: 3px 8px;
                border-radius: 10px;
                font-weight: normal;
              }
              .status-shipped {
                background-color: #e3fcef;
                color: #0e8a5f;
              }
              .status-delivered {
                background-color: #e3f1fd;
                color: #1570c1;
              }
              .order-body {
                padding: 10px;
              }
              .order-details {
                margin-bottom: 10px;
                font-size: 14px;
              }
              .order-item {
                display: flex;
                padding: 8px 0;
                border-bottom: 1px solid #f0f0f0;
              }
              .item-image {
                width: 40px;
                height: 40px;
                background-color: #f0f0f0;
                margin-right: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 12px;
                color: #666;
              }
              .item-details {
                flex-grow: 1;
              }
              .item-name {
                font-weight: 500;
                margin-bottom: 3px;
              }
              .item-price {
                font-size: 12px;
                color: #666;
              }
            </style>


<h1>Order Lookup</h1>
<div class="search-container">
<input id="order-search" placeholder="Search by order #, email, or name..." type="text" value="john.doe@example.com"/>
<button id="search-btn">Search</button>
</div>
<div id="orders-list">
<div class="order">
<div class="order-header">
                  Order #ORD-7829 <span class="order-status status-shipped">Shipped</span>
</div>
<div class="order-body">
<div class="order-details">
<div><strong>Date:</strong> April 15, 2025</div>
<div><strong>Total:</strong> $87.95</div>
</div>
<div class="order-items">
<div class="order-item">
<div class="item-image">img</div>
<div class="item-details">
<div class="item-name">Wireless Headphones</div>
<div class="item-price">$59.99 √ó 1</div>
</div>
</div>
</div>
</div>
</div>
</div>


        `
      }
    ];

    // State variables
    let apps = [...sampleApps];
    let selectedTags = [];
    let filteredApps = [...apps];
    let selectedApp = null;
    let isUploading = false;

    // Initialize the app
    document.addEventListener('DOMContentLoaded', function() {
      renderTagCategories();
      renderApps();
      setupEventListeners();
    });

    // Set up event listeners
    function setupEventListeners() {
      // Search input
      document.getElementById('search-input').addEventListener('input', function(e) {
        filterApps(e.target.value, selectedTags);
      });

      // Upload button
      document.getElementById('upload-btn').addEventListener('click', function() {
        document.getElementById('file-input').click();
      });

      // File input
      document.getElementById('file-input').addEventListener('change', handleFileUpload);

      // Reset filters button
      document.getElementById('reset-filters').addEventListener('click', function() {
        document.getElementById('search-input').value = '';
        selectedTags = [];
        renderActiveTags();
        filterApps('', []);
      });
    }

    // Render tag categories
    function renderTagCategories() {
      const container = document.getElementById('tag-categories');
      container.innerHTML = '';

      for (const [category, tags] of Object.entries(tagCategories)) {
        const categoryEl = document.createElement('div');
        categoryEl.className = 'mb-3 mr-4';
        
        const titleEl = document.createElement('div');
        titleEl.className = 'text-sm text-gray-500 mb-1';
        titleEl.textContent = category;
        
        const tagsContainer = document.createElement('div');
        tagsContainer.className = 'flex flex-wrap gap-1';
        
        for (const tag of tags) {
          const tagButton = document.createElement('button');
          tagButton.className = `text-xs px-2 py-1 rounded bg-gray-100 text-gray-700 hover:bg-gray-200`;
          tagButton.textContent = tag;
          tagButton.onclick = function() {
            toggleTag(tag);
          };
          
          tagsContainer.appendChild(tagButton);
        }
        
        categoryEl.appendChild(titleEl);
        categoryEl.appendChild(tagsContainer);
        container.appendChild(categoryEl);
      }
    }

    // Toggle a tag selection
    function toggleTag(tag) {
      if (selectedTags.includes(tag)) {
        selectedTags = selectedTags.filter(t =&gt; t !== tag);
      } else {
        selectedTags.push(tag);
      }
      
      renderActiveTags();
      filterApps(document.getElementById('search-input').value, selectedTags);
      updateTagButtons();
    }

    // Update tag buttons to show selected state
    function updateTagButtons() {
      const buttons = document.querySelectorAll('#tag-categories button');
      
      buttons.forEach(button =&gt; {
        if (selectedTags.includes(button.textContent)) {
          button.className = 'text-xs px-2 py-1 rounded bg-blue-500 text-white';
        } else {
          button.className = 'text-xs px-2 py-1 rounded bg-gray-100 text-gray-700 hover:bg-gray-200';
        }
      });
    }

    // Render active tags
    function renderActiveTags() {
      const container = document.getElementById('active-tags');
      const tagsContainer = document.getElementById('active-tags-container');
      
      if (selectedTags.length === 0) {
        container.classList.add('hidden');
        return;
      }
      
      container.classList.remove('hidden');
      tagsContainer.innerHTML = '';
      
      for (const tag of selectedTags) {
        const tagEl = document.createElement('div');
        tagEl.className = 'flex items-center bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded';
        
        const tagText = document.createTextNode(tag);
        
        const removeBtn = document.createElement('button');
        removeBtn.className = 'ml-1 text-blue-500';
        removeBtn.textContent = '√ó';
        removeBtn.onclick = function() {
          toggleTag(tag);
        };
        
        tagEl.appendChild(tagText);
        tagEl.appendChild(removeBtn);
        tagsContainer.appendChild(tagEl);
      }
      
      // Add clear all button
      if (selectedTags.length &gt; 0) {
        const clearBtn = document.createElement('button');
        clearBtn.className = 'text-xs text-red-500 underline ml-2';
        clearBtn.textContent = 'Clear all';
        clearBtn.onclick = function() {
          selectedTags = [];
          renderActiveTags();
          filterApps(document.getElementById('search-input').value, []);
          updateTagButtons();
        };
        
        tagsContainer.appendChild(clearBtn);
      }
    }

    // Filter apps based on search term and selected tags
    function filterApps(searchTerm, tags) {
      const term = searchTerm.toLowerCase();
      
      filteredApps = apps.filter(app =&gt; {
        // Filter by search term
        const matchesSearch = 
          !term ||
          app.name.toLowerCase().includes(term) ||
          app.description.toLowerCase().includes(term) ||
          app.author.toLowerCase().includes(term);
        
        // Filter by selected tags
        const matchesTags = 
          tags.length === 0 ||
          tags.some(tag =&gt; app.tags.includes(tag));
        
        return matchesSearch &amp;&amp; matchesTags;
      });
      
      renderApps();
    }

    // Render apps grid
    function renderApps() {
      const container = document.getElementById('app-grid');
      const emptyState = document.getElementById('empty-state');
      
      if (filteredApps.length === 0) {
        container.classList.add('hidden');
        emptyState.classList.remove('hidden');
        return;
      }
      
      container.classList.remove('hidden');
      emptyState.classList.add('hidden');
      
      container.innerHTML = '';
      
      for (const app of filteredApps) {
        const card = document.createElement('div');
        card.className = 'app-card border rounded-lg overflow-hidden hover:shadow-md transition-shadow cursor-pointer bg-white';
        card.onclick = function() {
          showAppPreview(app);
        };
        
        // Card header
        const header = document.createElement('div');
        header.className = 'p-4';
        
        const title = document.createElement('h3');
        title.className = 'font-bold text-lg';
        title.textContent = app.name;
        
        const desc = document.createElement('p');
        desc.className = 'text-gray-600 text-sm mt-1';
        desc.textContent = app.description;
        
        const author = document.createElement('p');
        author.className = 'text-xs text-gray-500 mt-2';
        author.textContent = `by ${app.author}`;
        
        const tagsContainer = document.createElement('div');
        tagsContainer.className = 'mt-2 flex flex-wrap gap-1';
        
        // Display only first 2 tags
        for (let i = 0; i &lt; Math.min(2, app.tags.length); i++) {
          const tag = app.tags[i];
          const tagEl = document.createElement('span');
          tagEl.className = 'bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded';
          tagEl.textContent = tag;
          tagEl.onclick = function(e) {
            e.stopPropagation();
            toggleTag(tag);
          };
          
          tagsContainer.appendChild(tagEl);
        }
        
        // Show +X more if more than 2 tags
        if (app.tags.length &gt; 2) {
          const more = document.createElement('span');
          more.className = 'text-xs text-gray-500';
          more.textContent = `+${app.tags.length - 2} more`;
          tagsContainer.appendChild(more);
        }
        
        header.appendChild(title);
        header.appendChild(desc);
        header.appendChild(author);
        header.appendChild(tagsContainer);
        
        // Preview section
        const preview = document.createElement('div');
        preview.className = 'app-preview-container border-t preview-container';
        
        const iframe = document.createElement('iframe');
        iframe.className = 'w-full h-full border-0 block';
        iframe.title = app.name;
        // Setup iframe after appending to DOM
        
        preview.appendChild(iframe);
        
        // Assemble card
        card.appendChild(header);
        card.appendChild(preview);
        
        container.appendChild(card);
        
        // Initialize iframe content after added to DOM
        const iframeDoc = iframe.contentWindow.document;
        iframeDoc.open();
        iframeDoc.write(app.html);
        iframeDoc.close();
      }
    }

    // Show app preview
    function showAppPreview(app) {
      selectedApp = app;
      document.getElementById('main-content').classList.add('hidden');
      
      const previewContainer = document.getElementById('app-preview');
      previewContainer.classList.remove('hidden');
      previewContainer.innerHTML = '';
      
      // Back button
      const backBtn = document.createElement('div');
      backBtn.className = 'mb-4';
      
      const backLink = document.createElement('button');
      backLink.className = 'text-blue-500 hover:text-blue-700 flex items-center';
      backLink.textContent = '‚Üê Back to Gallery';
      backLink.onclick = function() {
        previewContainer.classList.add('hidden');
        document.getElementById('main-content').classList.remove('hidden');
      };
      
      backBtn.appendChild(backLink);
      
      // App info section
      const infoSection = document.createElement('div');
      infoSection.className = 'mb-6';
      
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold';
      title.textContent = app.name;
      
      const desc = document.createElement('p');
      desc.className = 'text-gray-600 mt-1';
      desc.textContent = app.description;
      
      const metaInfo = document.createElement('div');
      metaInfo.className = 'mt-2 flex items-center';
      
      const author = document.createElement('span');
      author.className = 'text-sm text-gray-500 mr-2';
      author.textContent = `by ${app.author}`;
      
      const tagsContainer = document.createElement('div');
      tagsContainer.className = 'flex flex-wrap gap-1';
      
      for (const tag of app.tags) {
        const tagEl = document.createElement('span');
        tagEl.className = 'bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded';
        tagEl.textContent = tag;
        tagsContainer.appendChild(tagEl);
      }
      
      metaInfo.appendChild(author);
      metaInfo.appendChild(tagsContainer);
      
      infoSection.appendChild(title);
      infoSection.appendChild(desc);
      infoSection.appendChild(metaInfo);
      
      // Tabs and preview
      const previewSection = document.createElement('div');
      previewSection.className = 'border rounded-lg overflow-hidden';
      
      const tabs = document.createElement('div');
      tabs.className = 'bg-gray-100 px-4 py-2 border-b flex';
      
      const previewTab = document.createElement('button');
      previewTab.className = 'mr-4 py-1 text-blue-600 border-b-2 border-blue-600';
      previewTab.textContent = 'Interactive Preview';
      previewTab.onclick = function() {
        previewTab.className = 'mr-4 py-1 text-blue-600 border-b-2 border-blue-600';
        htmlTab.className = 'py-1 text-gray-600';
        previewContent.classList.remove('hidden');
        htmlContent.classList.add('hidden');
      };
      
      const htmlTab = document.createElement('button');
      htmlTab.className = 'py-1 text-gray-600';
      htmlTab.textContent = 'HTML';
      htmlTab.onclick = function() {
        previewTab.className = 'mr-4 py-1 text-gray-600';
        htmlTab.className = 'py-1 text-blue-600 border-b-2 border-blue-600';
        previewContent.classList.add('hidden');
        htmlContent.classList.remove('hidden');
      };
      
      tabs.appendChild(previewTab);
      tabs.appendChild(htmlTab);
      
      const content = document.createElement('div');
      content.className = 'bg-white';
      
      const previewContent = document.createElement('div');
      previewContent.className = 'full-preview';
      
      const iframe = document.createElement('iframe');
      iframe.className = 'w-full h-full border-0 block';
      iframe.title = app.name;
      
      previewContent.appendChild(iframe);
      
      const htmlContent = document.createElement('div');
      htmlContent.className = 'p-4 bg-gray-50 overflow-auto max-h-96 hidden';
      
      const pre = document.createElement('pre');
      pre.className = 'text-sm whitespace-pre-wrap';
      
      const code = document.createElement('code');
      code.textContent = app.html;
      
      pre.appendChild(code);
      htmlContent.appendChild(pre);
      
      content.appendChild(previewContent);
      content.appendChild(htmlContent);
      
      previewSection.appendChild(tabs);
      previewSection.appendChild(content);
      
      // Assemble preview
      previewContainer.appendChild(backBtn);
      previewContainer.appendChild(infoSection);
      previewContainer.appendChild(previewSection);
      
      // Initialize iframe content after added to DOM
      const iframeDoc = iframe.contentWindow.document;
      iframeDoc.open();
      iframeDoc.write(app.html);
      iframeDoc.close();
    }

    // Handle file upload
    async function handleFileUpload(event) {
      const file = event.target.files[0];
      if (!file) return;
      
      isUploading = true;
      document.getElementById('upload-btn').textContent = 'Processing...';
      
      try {
        // Simulate processing
        await new Promise(resolve =&gt; setTimeout(resolve, 1000));
        
        const filename = file.name;
        const appName = filename.replace('.zip', '');
        
        const newApp = {
          id: Date.now().toString(),
          name: appName,
          description: `Uploaded app - ${new Date().toLocaleString()}`,
          author: 'You',
          tags: ['Custom'],
          html: sampleApps[0].html // Use sample HTML for demo
        };
        
        apps.push(newApp);
        filterApps(document.getElementById('search-input').value, selectedTags);
        
        event.target.value = null;
        
        // Show the newly uploaded app
        showAppPreview(newApp);
        
      } catch (error) {
        console.error("Error processing ZIP:", error);
      } finally {
        isUploading = false;
        document.getElementById('upload-btn').textContent = 'Upload App';
      }
    }
  

